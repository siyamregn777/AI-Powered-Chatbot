(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4029:(e,t,a)=>{Promise.resolve().then(a.bind(a,9809))},9809:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(5155),n=a(2115),r=a(98),o=a.n(r);function l(){let[e,t]=(0,n.useState)([{role:"bot",content:"What can I help you with today?"}]),[a,r]=(0,n.useState)(""),[l,c]=(0,n.useState)(Date.now()),[i,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/chat/history"),a=await e.json();if(Array.isArray(a)){let e=a.map(e=>({role:"bot",content:e.bot_reply||"What can I help you with today?"}));t(e)}}catch(e){console.error("Error fetching chat history:",e)}})()},[]),(0,n.useEffect)(()=>{let e=setInterval(()=>{Date.now()-l>12e5&&t([])},1e3);return()=>clearInterval(e)},[l]);let u=(e,a)=>{let s=0,n=setInterval(()=>{s<e.length?(t(t=>{let a=t[t.length-1];return"bot"===a.role?[...t.slice(0,-1),{...a,content:e.slice(0,s+1)}]:t}),s++):(clearInterval(n),a())},50)},_=async()=>{if(a.trim()){let e={role:"user",content:a};if(t(t=>[...t,e]),c(Date.now()),"clear"===a.toLowerCase()||"delete"===a.toLowerCase()){t([]),r("");return}t(e=>[...e,{role:"bot",content:""}]),h(!0);let s=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a})});u((await s.json()).reply,()=>{h(!1)}),r("")}};return(0,s.jsxs)("div",{className:o().chatContainer,children:[(0,s.jsx)("div",{className:o().messages,children:e.map((t,a)=>(0,s.jsxs)("div",{className:"user"===t.role?o().userMessage:o().botMessage,children:[t.content,i&&a===e.length-1&&(0,s.jsx)("span",{className:o().cursor,children:"|"})]},a))}),(0,s.jsxs)("div",{className:o().inputContainer,children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&_()},className:o().input,placeholder:"Type your message..."}),(0,s.jsx)("button",{onClick:_,className:o().button,children:"Send"})]})]})}},98:e=>{e.exports={chatContainer:"Chat_chatContainer__4suD2",messages:"Chat_messages__RFyzj",userMessage:"Chat_userMessage__rxXIc",botMessage:"Chat_botMessage__kfqzz",inputContainer:"Chat_inputContainer__aJF34",input:"Chat_input__TMlEX",button:"Chat_button__WJG_E",cursor:"Chat_cursor__g36rr",blink:"Chat_blink__uSG_m"}}},e=>{var t=t=>e(e.s=t);e.O(0,[901,441,517,358],()=>t(4029)),_N_E=e.O()}]);